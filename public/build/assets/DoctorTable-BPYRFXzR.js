import{a as i,_ as C}from"./Pagination-CVRZu3Rg.js";import{_ as $}from"./Modal-CY1FjHJe.js";import{y as M,s as j,D as A,l as y,c as x,o as p,b as e,a as S,w as T,F as f,p as B,u as a,j as N,f as P,t as g,z,n as w,d as m}from"./app-C7xUQ23C.js";const u="/doctors",h={async getAll(t=1){try{return(await i.get(`${u}?page=${t}`)).data}catch(o){throw o}},async getDoctorsList(){try{return(await i.get(`${u}/list`)).data}catch(t){throw t}},get(t){return i.get(`/${u}/${t}`)},async create(t){try{return(await i.post(`${u}`,t)).data}catch(o){throw o}},update(t,o){return i.put(`/doctors/${t}`,o)},delete(t){return i.delete(`/doctors/${t}`)}},E=M("doctors",{state:()=>({doctors:{},currentDoctor:{},loading:!1,error:null,showAddDoctorModal:!1}),actions:{async fetchDoctors(t=1){try{this.loading=!0,this.doctors=await h.getAll(t),this.loading=!1}catch(o){throw this.loading=!1,o}},setCurrentDoctor(t){this.currentDoctor=t},async createDoctor(t){try{await h.create(this.currentDoctor)}catch(o){throw o}},setDoctors(t){this.doctors=t},clearDoctors(){this.doctors=[]},toggleDoctorModal(){this.showAddDoctorModal=!this.showAddDoctorModal},async deleteDoctor(t){try{await h.delete(t),this.fetchDoctors()}catch(o){throw o}}}}),L={class:"w-full overflow-x-auto inline-block min-w-full rounded-lg shadow"},V={class:"p-6 text-center"},F={class:"flex justify-center gap-4 mt-4"},O={class:"w-full whitespace-no-wrap"},R={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},U={class:"text-gray-900 whitespace-no-wrap"},W={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},q={class:"text-gray-900 whitespace-no-wrap"},G={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},H={class:"text-gray-900 whitespace-no-wrap"},I={class:"border-b bg-white border-gray-200 px-2 py-2 text-sm"},J={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},K={class:"flex justify-end gap-2"},Q=["disabled","onClick"],X=["disabled","onClick"],Y={class:"flex flex-col items-center border-t bg-white px-5 py-5 xs:flex-row xs:justify-between overflow-x-auto"},Z={__name:"DoctorTable",setup(t){const o=E(),{doctors:c}=j(o),l=A().props.auth.user,d=y(!1),b=y(null);function _(n){if(n.id==l.id)return!1;b.value=n,d.value=!0}const D=n=>{if(n.id==l.id)return!1;o.setCurrentDoctor(n),o.toggleDoctorModal()};function v(){if(b.value.id==l.id)return!1;o.deleteDoctor(b.value.id),d.value=!1}return(n,s)=>(p(),x(f,null,[e("div",L,[S($,{show:d.value,maxWidth:"sm",onClose:s[1]||(s[1]=r=>d.value=!1)},{default:T(()=>[e("div",V,[s[2]||(s[2]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-2"},"Delete Doctor",-1)),s[3]||(s[3]=e("p",{class:"text-gray-600 mb-6"},"Are you sure you want to delete this doctor? This action cannot be undone.",-1)),e("div",F,[e("button",{class:"px-4 py-2 rounded bg-red-600 text-white font-semibold hover:bg-red-700 transition",onClick:v}," Confirm "),e("button",{class:"px-4 py-2 rounded bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 transition",onClick:s[0]||(s[0]=r=>d.value=!1)}," Cancel ")])])]),_:1},8,["show"]),e("table",O,[s[6]||(s[6]=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," id "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Name "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," email "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," role "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," - ")])],-1)),e("tbody",null,[(p(!0),x(f,null,B(a(c).data,r=>(p(),x("tr",{key:r.id,class:"text-gray-700"},[e("td",R,[e("p",U,g(r.id),1)]),e("td",W,[e("p",q,g(r.name),1)]),e("td",G,[e("p",H,g(r.email),1)]),e("td",I,[e("span",{style:z(`background-color: ${r.role_colors[1]}; color: ${r.role_colors[0]}`),class:"whitespace-no-wrap p-2 rounded-full"},g(r.role_name),5)]),e("td",J,[e("div",K,[e("button",{class:w(["flex items-center gap-1 rounded-full bg-yellow-100 text-yellow-700 px-3 py-1 text-xs font-semibold hover:bg-yellow-200 transition",{"cursor-not-allowed opacity-50":a(l).id==r.id}]),title:"Edit",disabled:a(l).id==r.id,onClick:k=>D(r)},s[4]||(s[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5h2m-1 0v14m-7-7h14"})],-1),m(" Edit ")]),10,Q),e("button",{class:w(["flex items-center gap-1 rounded-full bg-red-100 text-red-700 px-3 py-1 text-xs font-semibold hover:bg-red-200 transition",{"cursor-not-allowed opacity-50":a(l).id==r.id}]),title:"Delete",disabled:a(l).id==r.id,onClick:k=>_(r)},s[5]||(s[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),m(" Delete ")]),10,X)])])]))),128))])])]),e("div",Y,[a(c).meta&&a(c).meta.links.length?(p(),N(C,{key:0,links:a(c).meta.links,onPaginationChangePage:a(o).fetchDoctors},null,8,["links","onPaginationChangePage"])):P("",!0)])],64))}},re=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{re as D,Z as _,E as u};
